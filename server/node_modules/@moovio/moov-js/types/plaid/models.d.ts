import { Plaid } from "plaid-link";

declare module "@moovio/moov-js" {
  // Plaid's public Link docs conflict with their public TypeScript definition.
  // This reconciles that discrepancy.
  interface PlaidCreate
    extends Omit<Plaid.CreateConfig, "key" | "clientName" | "product" | "env" | "onSuccess"> {
    clientName?: string;
    product?: Plaid.Product[];
    env?: Plaid.Environment;
    redirectURL?: string;
    receivedRedirectUri?: string;
    onSuccess?: (public_token: string, metadata: any) => void;
  }

  interface PlaidInitProps extends Omit<PlaidCreate, "onSuccess"> {
    accountID: string;
    elementID?: string;
    onSuccess?: (account: BankAccount) => void;
  }

  interface PlaidReinitProps extends Omit<PlaidCreate, "onSuccess"> {
    onSuccess?: (account: BankAccount) => void;
  }

  interface PlaidFunction {
    create(params: PlaidCreate): Plaid.LinkHandler;
    version: string;
  }

  interface PlaidFunctions {
    initialize: (props: PlaidInitProps) => Promise<Plaid.LinkHandler>;
    reinitialize: (props: PlaidReinitProps) => Promise<Plaid.LinkHandler>;
  }
}
